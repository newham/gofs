{{define "FolderTemp"}}


    <!--pannle-->

    <!--end pannel-->
    <div class="panel panel-default" id="gird-view">
        <div class="panel-heading">
            <!--bread-->
            <div class="path-bar">

                <a href="/">
                    <span class="glyphicon glyphicon-home" aria-hidden="true"></span>
                </a> {{.Folder.Path}}
                <div class="pull-right">
                    view:
                    <a href="/folder?t=grid&name={{$.Folder.Path}}">
                        <span class="glyphicon glyphicon-th-large" aria-hidden="true"></span>
                    </a>
                    /
                    <a href="/folder?t=table&name={{$.Folder.Path}}">
                        <span class="glyphicon glyphicon-th-list" aria-hidden="true"></span>
                    </a>
                </div>
            </div>
        </div>
        <div class="action-bar">
            <div class="btn-group">
                <button type="button" class="btn btn-default btn-left" onclick="selectAll()" id="btn-all">
                    <span class="glyphicon glyphicon-ok" aria-hidden="true"></span> Select All
                </button>
                <button type="button" class="btn btn-default" onclick="deleteAll()" id="btn-delete">
                    <span class="glyphicon glyphicon-trash" aria-hidden="true"></span> Remove
                </button>
                <button type="button" class="btn btn-default" data-toggle="modal" data-target="#uploadModal">
                    <span class="glyphicon glyphicon-cloud-upload" aria-hidden="true"></span> Upload
                    <span id="upload-info" class="badge bg-success"></span>
                </button>
                <button href="#" data-toggle="modal" data-target="#mkdirModal"
                        class="btn btn-default">
                    <span class="glyphicon glyphicon-folder-close" aria-hidden="true"></span> New Folder
                </button>
                <button href="#" data-toggle="modal" data-target="#touchModal"
                        class="btn btn-default btn-right">
                    <span class="glyphicon glyphicon-file" aria-hidden="true"></span> New File
                </button>
            </div>
        </div>
        <div class="panel-body"
             style="padding-left: 20px !important;padding-right: 20px !important;padding-top: 10px !important;">

            <div class="row">
                {{if ne .Folder.Path "/"}}
                    <div class="col-lg-1 col-md-2 col-xs-2 grid-box">
                        <a href="/folder?name={{.Folder.Up}}">
                            <div class="grid-bg">
                                <img src="/public/img/folder.png" class="grid-img-folder">
                                <div class="grid-title">
                                    ../
                                </div>
                            </div>
                        </a>
                    </div>
                {{end}}
                {{range $k, $v := .Folder.Folders}}
                    <div class="col-lg-1 col-md-2 col-xs-2 grid-box">
                        <div class="grid-bg">
                            <a href="/folder?name={{$.Folder.Path}}{{$v}}">
                                <img src="/public/img/folder.png" class="grid-img-folder">
                                <div class="grid-title">
                                    {{$v}}
                                </div>
                            </a>
                        </div>
                        <div class="grid-footer">
                            <input type="checkbox" name="check-delete" value="{{$.Folder.Path}}{{$v}}">
                            <a href="javascript:if(confirm('Ensure Delete  [{{$v}}]?'))location='/del?name={{$.Folder.Path}}{{$v}}'">
                                <span class="glyphicon glyphicon-trash" aria-hidden="true"></span>
                            </a>
                        </div>

                    </div>
                {{end}}
                {{range $k, $v := .Folder.Files}}
                    <div class="col-lg-1 col-md-2 col-xs-2 grid-box">
                        <div class="grid-bg">
                            <a href="/download?name={{$.Folder.Path}}{{$v.Name}}&type=file" download="{{$v.Name}}">
                                <img src="/public/img/file.png" class="grid-img-file">
                                <div class="grid-title">
                                    {{$v.Name}}
                                </div>
                            </a>
                        </div>
                        <div class="grid-footer">
                            <input type="checkbox" name="check-delete" value="{{$.Folder.Path}}{{$v.Name}}">
                            <a
                                    href="javascript:if(confirm('Ensure Delete [{{$v.Name}}]?'))location='/del?name={{$.Folder.Path}}{{$v.Name}}'">
                                <span class="glyphicon glyphicon-trash" aria-hidden="true"></span></a>
                            {{if $v.Editable}}
                                <a href="/edit?name={{$.Folder.Path}}{{$v.Name}}&type=open"><span
                                            class="glyphicon glyphicon-edit" aria-hidden="true"></span></a>
                            {{end}}


                        </div>

                    </div>
                {{end}}
                {{if not ( or  .Folder.Folders .Folder.Files )}}
                    <div class="col-lg-1 col-md-2 col-xs-3 grid-box">
                        <div class="grid-bg">
                            <a href="#" data-toggle="modal"
                               data-target="#uploadModal">
                                <img src="/public/img/up.png" class="grid-img-file">
                                <div class="grid-title">
                                    upload
                                </div>
                            </a>
                        </div>
                    </div>
                {{end}}
            </div>
        </div>
    </div>
    <!--shell-->
    <!--js-->
    <script>
        var isAll = false;
        /*user display:none*/
        // $('#btn-delete').hide();

        function selectAll() {
            if (isAll) {
                $('input:checkbox').each(function () {
                    this.checked = false;
                    // $(this).hide();
                });
                setBtn(false);
            } else {
                $('input:checkbox').each(function () {
                    this.checked = true;
                    // $(this).show();
                });
                setBtn(true);
            }
            isAll = !isAll;
        }

        function deleteAll() {
            var files = "";
            $('input:checkbox').each(function () {
                if (this.checked) {
                    files = files + "|" + $(this).val();
                }

            });
            if (files == "") {
                alert("please select one");
                return;
            }
            if (confirm("Ensure to delete[" + files + "]?")) {
                $.post(
                    "/del?type=array",
                    {array: files},
                    function (data) {
                        $('body').html(data);
                    }
                )
            }

        }

        $('input:checkbox').click(function () {
            var isChecked = false;
            $('input:checkbox').each(function () {
                if (this.checked) {
                    isChecked = true;
                    isAll = true;
                }
            });
            setBtn(isChecked);
        })

        function setBtn(isChecked) {
            if (isChecked) {
                // $('#btn-all').text('X');
                // $('#btn-all').removeClass("btn-success");
                // $('#btn-all').addClass("btn-warning");
                $('#btn-delete').show();
            } else {
                // $('#btn-all').text('âˆš');
                // $('#btn-all').addClass("btn-success");
                // $('#btn-all').removeClass("btn-warning");
                $('#btn-delete').hide();
            }

        }

        var isGird = true;

        function view() {
            $('#btn-delete').hide();
        }

        view();
    </script>

{{end}}